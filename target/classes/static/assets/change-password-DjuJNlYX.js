import{d as $,n as v,r as l,a as p,b as f,_ as g,g as r,i as e,q as t,t as n,s as b,j as i,v as w,$ as m,f as o}from"./app-sWctXk48.js";import{u as y}from"./index-DPq3GusL.js";import{r as h,m as C,a as k,s as M}from"./index-BbpDxnmj.js";const L=$({compatConfig:{MODE:3},validations(){return{resetPassword:{currentPassword:{required:h},newPassword:{required:h,minLength:C(4),maxLength:k(254)},confirmPassword:{sameAsPassword:M(this.resetPassword.newPassword)}}}},setup(){const s=v("currentUsername"),a=l(null),u=l(null),c=l(null),P=l({currentPassword:null,newPassword:null,confirmPassword:null});return{username:s,success:a,error:u,doNotMatch:c,resetPassword:P,v$:y(),t$:p().t}},methods:{changePassword(){this.resetPassword.newPassword!==this.resetPassword.confirmPassword?(this.error=null,this.success=null,this.doNotMatch="ERROR"):(this.doNotMatch=null,f.post("api/account/change-password",{currentPassword:this.resetPassword.currentPassword,newPassword:this.resetPassword.newPassword}).then(()=>{this.success="OK",this.error=null}).catch(()=>{this.success=null,this.error="ERROR"}))}}}),q={class:"row justify-content-center"},T={class:"col-md-8 toastify-container"},D={key:0,id:"password-title"},H=["innerHTML"],N=["innerHTML"],R=["innerHTML"],V=["textContent"],_={class:"form-group"},E=["textContent"],O=["placeholder"],U={key:0},j=["textContent"],A={class:"form-group"},B=["textContent"],S=["placeholder"],z={key:0},I=["textContent"],K=["textContent"],F=["textContent"],G={class:"form-group"},J=["textContent"],Q=["placeholder"],W={key:0},X=["textContent"],Y=["disabled","textContent"];function Z(s,a,u,c,P,x){return o(),r("div",null,[e("div",q,[e("div",T,[s.username?(o(),r("h2",D,[e("span",{innerHTML:s.t$("password.title",{username:s.username})},null,8,H)])):t("",!0),s.success?(o(),r("div",{key:1,class:"alert alert-success",role:"alert",innerHTML:s.t$("password.messages.success")},null,8,N)):t("",!0),s.error?(o(),r("div",{key:2,class:"alert alert-danger",role:"alert",innerHTML:s.t$("password.messages.error")},null,8,R)):t("",!0),s.doNotMatch?(o(),r("div",{key:3,class:"alert alert-danger",role:"alert",textContent:n(s.t$("global.messages.error.dontmatch"))},null,8,V)):t("",!0),e("form",{name:"form",id:"password-form",onSubmit:a[3]||(a[3]=b(d=>s.changePassword(),["prevent"]))},[e("div",_,[e("label",{class:"form-control-label",for:"currentPassword",textContent:n(s.t$("global.form['currentpassword.label']"))},null,8,E),i(e("input",{type:"password",class:m(["form-control",{valid:!s.v$.resetPassword.currentPassword.$invalid,invalid:s.v$.resetPassword.currentPassword.$invalid}]),id:"currentPassword",name:"currentPassword",placeholder:s.t$("global.form['currentpassword.placeholder']"),"onUpdate:modelValue":a[0]||(a[0]=d=>s.v$.resetPassword.currentPassword.$model=d),required:"","data-cy":"currentPassword"},null,10,O),[[w,s.v$.resetPassword.currentPassword.$model]]),s.v$.resetPassword.currentPassword.$anyDirty&&s.v$.resetPassword.currentPassword.$invalid?(o(),r("div",U,[s.v$.resetPassword.currentPassword.required?t("",!0):(o(),r("small",{key:0,class:"form-text text-danger",textContent:n(s.t$("global.messages.validate.newpassword.required"))},null,8,j))])):t("",!0)]),e("div",A,[e("label",{class:"form-control-label",for:"newPassword",textContent:n(s.t$("global.form['newpassword.label']"))},null,8,B),i(e("input",{type:"password",class:m(["form-control",{valid:!s.v$.resetPassword.newPassword.$invalid,invalid:s.v$.resetPassword.newPassword.$invalid}]),id:"newPassword",name:"newPassword",placeholder:s.t$("global.form['newpassword.placeholder']"),"onUpdate:modelValue":a[1]||(a[1]=d=>s.v$.resetPassword.newPassword.$model=d),minlength:"4",maxlength:"50",required:"","data-cy":"newPassword"},null,10,S),[[w,s.v$.resetPassword.newPassword.$model]]),s.v$.resetPassword.newPassword.$anyDirty&&s.v$.resetPassword.newPassword.$invalid?(o(),r("div",z,[s.v$.resetPassword.newPassword.required?t("",!0):(o(),r("small",{key:0,class:"form-text text-danger",textContent:n(s.t$("global.messages.validate.newpassword.required"))},null,8,I)),s.v$.resetPassword.newPassword.minLength?t("",!0):(o(),r("small",{key:1,class:"form-text text-danger",textContent:n(s.t$("global.messages.validate.newpassword.minlength"))},null,8,K)),s.v$.resetPassword.newPassword.maxLength?t("",!0):(o(),r("small",{key:2,class:"form-text text-danger",textContent:n(s.t$("global.messages.validate.newpassword.maxlength"))},null,8,F))])):t("",!0)]),e("div",G,[e("label",{class:"form-control-label",for:"confirmPassword",textContent:n(s.t$("global.form['confirmpassword.label']"))},null,8,J),i(e("input",{type:"password",class:m(["form-control",{valid:!s.v$.resetPassword.confirmPassword.$invalid,invalid:s.v$.resetPassword.confirmPassword.$invalid}]),id:"confirmPassword",name:"confirmPassword",placeholder:s.t$("global.form['confirmpassword.placeholder']"),"onUpdate:modelValue":a[2]||(a[2]=d=>s.v$.resetPassword.confirmPassword.$model=d),minlength:"4",maxlength:"50",required:"","data-cy":"confirmPassword"},null,10,Q),[[w,s.v$.resetPassword.confirmPassword.$model]]),s.v$.resetPassword.confirmPassword.$anyDirty&&s.v$.resetPassword.confirmPassword.$invalid?(o(),r("div",W,[s.v$.resetPassword.confirmPassword.sameAsPassword?t("",!0):(o(),r("small",{key:0,class:"form-text text-danger",textContent:n(s.t$("global.messages.error.dontmatch"))},null,8,X))])):t("",!0)]),e("button",{type:"submit",disabled:s.v$.resetPassword.$invalid,class:"btn btn-primary",textContent:n(s.t$("password.form.button")),"data-cy":"submit"},null,8,Y)],32)])])])}const os=g(L,[["render",Z]]);export{os as default};
