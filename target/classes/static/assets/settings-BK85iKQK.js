import{d as C,C as N,r as m,l as A,n as b,D as L,a as k,b as E,_ as x,g as e,i as l,q as n,s as q,t as a,j as r,v as u,$ as d,a1 as M,Y as D,a2 as T,f as s}from"./app-sWctXk48.js";import{u as K}from"./index-DPq3GusL.js";import{r as g,m as c,a as v,e as R}from"./index-BbpDxnmj.js";import{E as V}from"./constants-DfqkunPD.js";const H={settingsAccount:{firstName:{required:g,minLength:c(1),maxLength:v(50)},lastName:{required:g,minLength:c(1),maxLength:v(50)},email:{required:g,email:R,minLength:c(5),maxLength:v(254)}}},S=C({compatConfig:{MODE:3},name:"Settings",validations:H,setup(){const t=N(),i=m(null),$=m(null),h=m(null),f=A(()=>t.account),p=b("currentUsername",()=>A(()=>{var o;return(o=t.account)==null?void 0:o.login}),!0);return{success:i,error:$,errorEmailExists:h,settingsAccount:f,username:p,v$:K(),languages:L(),t$:k().t}},methods:{save(){return this.error=null,this.errorEmailExists=null,E.post("api/account",this.settingsAccount).then(()=>{this.error=null,this.success="OK",this.errorEmailExists=null}).catch(t=>{this.success=null,this.error="ERROR",t.response.status===400&&t.response.data.type===V&&(this.errorEmailExists="ERROR",this.error=null)})}}}),U={class:"row justify-content-center"},O={class:"col-md-8 toastify-container"},_={key:0,id:"settings-title"},j=["innerHTML"],w=["innerHTML"],B=["innerHTML"],Y={class:"form-group"},I=["textContent"],z=["placeholder"],F={key:0},P=["textContent"],G=["textContent"],J=["textContent"],Q={class:"form-group"},W=["textContent"],X=["placeholder"],Z={key:0},tt=["textContent"],et=["textContent"],st=["textContent"],nt={class:"form-group"},at=["textContent"],lt=["placeholder"],ot={key:0},it=["textContent"],rt=["textContent"],mt=["textContent"],ut=["textContent"],dt={key:0,class:"form-group"},gt=["textContent"],ct=["value"],vt=["disabled","textContent"];function $t(t,i,$,h,f,p){return s(),e("div",null,[l("div",U,[l("div",O,[t.username?(s(),e("h2",_,[l("span",{innerHTML:t.t$("settings.title",{username:t.username})},null,8,j)])):n("",!0),t.success?(s(),e("div",{key:1,class:"alert alert-success",role:"alert",innerHTML:t.t$("settings.messages.success")},null,8,w)):n("",!0),t.errorEmailExists?(s(),e("div",{key:2,class:"alert alert-danger",role:"alert",innerHTML:t.t$("register.messages.error.emailexists")},null,8,B)):n("",!0),t.settingsAccount?(s(),e("form",{key:3,name:"form",id:"settings-form",onSubmit:i[4]||(i[4]=q(o=>t.save(),["prevent"])),novalidate:""},[l("div",Y,[l("label",{class:"form-control-label",for:"firstName",textContent:a(t.t$("settings.form.firstname"))},null,8,I),r(l("input",{type:"text",class:d(["form-control",{valid:!t.v$.settingsAccount.firstName.$invalid,invalid:t.v$.settingsAccount.firstName.$invalid}]),id:"firstName",name:"firstName",placeholder:t.t$("settings.form['firstname.placeholder']"),"onUpdate:modelValue":i[0]||(i[0]=o=>t.v$.settingsAccount.firstName.$model=o),minlength:"1",maxlength:"50",required:"","data-cy":"firstname"},null,10,z),[[u,t.v$.settingsAccount.firstName.$model]]),t.v$.settingsAccount.firstName.$anyDirty&&t.v$.settingsAccount.firstName.$invalid?(s(),e("div",F,[t.v$.settingsAccount.firstName.required?n("",!0):(s(),e("small",{key:0,class:"form-text text-danger",textContent:a(t.t$("settings.messages.validate.firstname.required"))},null,8,P)),t.v$.settingsAccount.firstName.minLength?n("",!0):(s(),e("small",{key:1,class:"form-text text-danger",textContent:a(t.t$("settings.messages.validate.firstname.minlength"))},null,8,G)),t.v$.settingsAccount.firstName.maxLength?n("",!0):(s(),e("small",{key:2,class:"form-text text-danger",textContent:a(t.t$("settings.messages.validate.firstname.maxlength"))},null,8,J))])):n("",!0)]),l("div",Q,[l("label",{class:"form-control-label",for:"lastName",textContent:a(t.t$("settings.form.lastname"))},null,8,W),r(l("input",{type:"text",class:d(["form-control",{valid:!t.v$.settingsAccount.lastName.$invalid,invalid:t.v$.settingsAccount.lastName.$invalid}]),id:"lastName",name:"lastName",placeholder:t.t$("settings.form['lastname.placeholder']"),"onUpdate:modelValue":i[1]||(i[1]=o=>t.v$.settingsAccount.lastName.$model=o),minlength:"1",maxlength:"50",required:"","data-cy":"lastname"},null,10,X),[[u,t.v$.settingsAccount.lastName.$model]]),t.v$.settingsAccount.lastName.$anyDirty&&t.v$.settingsAccount.lastName.$invalid?(s(),e("div",Z,[t.v$.settingsAccount.lastName.required?n("",!0):(s(),e("small",{key:0,class:"form-text text-danger",textContent:a(t.t$("settings.messages.validate.lastname.required"))},null,8,tt)),t.v$.settingsAccount.lastName.minLength?n("",!0):(s(),e("small",{key:1,class:"form-text text-danger",textContent:a(t.t$("settings.messages.validate.lastname.minlength"))},null,8,et)),t.v$.settingsAccount.lastName.maxLength?n("",!0):(s(),e("small",{key:2,class:"form-text text-danger",textContent:a(t.t$("settings.messages.validate.lastname.maxlength"))},null,8,st))])):n("",!0)]),l("div",nt,[l("label",{class:"form-control-label",for:"email",textContent:a(t.t$("global.form['email.label']"))},null,8,at),r(l("input",{type:"email",class:d(["form-control",{valid:!t.v$.settingsAccount.email.$invalid,invalid:t.v$.settingsAccount.email.$invalid}]),id:"email",name:"email",placeholder:t.t$("global.form['email.placeholder']"),"onUpdate:modelValue":i[2]||(i[2]=o=>t.v$.settingsAccount.email.$model=o),minlength:"5",maxlength:"254",email:"",required:"","data-cy":"email"},null,10,lt),[[u,t.v$.settingsAccount.email.$model]]),t.v$.settingsAccount.email.$anyDirty&&t.v$.settingsAccount.email.$invalid?(s(),e("div",ot,[t.v$.settingsAccount.email.required?n("",!0):(s(),e("small",{key:0,class:"form-text text-danger",textContent:a(t.t$("global.messages.validate.email.required"))},null,8,it)),t.v$.settingsAccount.email.email?n("",!0):(s(),e("small",{key:1,class:"form-text text-danger",textContent:a(t.t$("global.messages.validate.email.invalid"))},null,8,rt)),t.v$.settingsAccount.email.minLength?n("",!0):(s(),e("small",{key:2,class:"form-text text-danger",textContent:a(t.t$("global.messages.validate.email.minlength"))},null,8,mt)),t.v$.settingsAccount.email.maxLength?n("",!0):(s(),e("small",{key:3,class:"form-text text-danger",textContent:a(t.t$("global.messages.validate.email.maxlength"))},null,8,ut))])):n("",!0)]),t.languages&&Object.keys(t.languages).length>1?(s(),e("div",dt,[l("label",{for:"langKey",textContent:a(t.t$("settings.form.language"))},null,8,gt),r(l("select",{class:"form-control",id:"langKey",name:"langKey","onUpdate:modelValue":i[3]||(i[3]=o=>t.settingsAccount.langKey=o),"data-cy":"langKey"},[(s(!0),e(D,null,T(t.languages,(o,y)=>(s(),e("option",{value:y,key:`lang-${y}`},a(o.name),9,ct))),128))],512),[[M,t.settingsAccount.langKey]])])):n("",!0),l("button",{type:"submit",disabled:t.v$.settingsAccount.$invalid,class:"btn btn-primary",textContent:a(t.t$("settings.form.button")),"data-cy":"submit"},null,8,vt)],32)):n("",!0)])])])}const At=x(S,[["render",$t]]);export{At as default};
