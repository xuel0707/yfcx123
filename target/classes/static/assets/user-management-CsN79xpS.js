import{d as I,n as $,r as i,a as L,_ as j,e as c,g as d,i as t,t as s,h as r,w as p,Y as U,a2 as D,q as g,j as _,a3 as A,f as u,k as P}from"./app-sWctXk48.js";import{U as V}from"./user-management.service-BI5UKYeA.js";import{u as B}from"./alert.service-B_Xn3uRW.js";import{u as R}from"./date-format-BkV2akP9.js";const q=I({compatConfig:{MODE:3},name:"JhiUserManagementComponent",mounted(){this.loadAll()},setup(e){const o=$("alertService",()=>B(),!0),{formatDateShort:y}=R(),k=$("userManagementService",()=>new V,!0),M=$("currentUsername"),O=i(""),m=i(""),h=i(20),l=i(1),v=i(1),f=i("id"),C=i(!1),b=i(!1),n=i(null),a=i([]),S=i(0),w=i(null);return{formatDate:y,userManagementService:k,alertService:o,error:O,success:m,itemsPerPage:h,page:l,previousPage:v,propOrder:f,reverse:C,isLoading:b,removeId:n,users:a,username:M,totalItems:S,queryCount:w,t$:L().t}},methods:{setActive(e,o){e.activated=o,this.userManagementService.update(e).then(()=>{this.error=null,this.success="OK",this.loadAll()}).catch(()=>{this.success=null,this.error="ERROR",e.activated=!1})},loadAll(){this.isLoading=!0,this.userManagementService.retrieve({sort:this.sort(),page:this.page-1,size:this.itemsPerPage}).then(e=>{this.isLoading=!1,this.users=e.data,this.totalItems=Number(e.headers["x-total-count"]),this.queryCount=this.totalItems}).catch(()=>{this.isLoading=!1})},handleSyncList(){this.loadAll()},sort(){const e=[`${this.propOrder},${this.reverse?"desc":"asc"}`];return this.propOrder!=="id"&&e.push("id"),e},loadPage(e){e!==this.previousPage&&(this.previousPage=e,this.transition())},transition(){this.loadAll()},changeOrder(e){this.propOrder=e,this.reverse=!this.reverse,this.transition()},deleteUser(){this.userManagementService.remove(this.removeId).then(e=>{this.alertService.showInfo(this.t$(e.headers["x-yfcx123app-alert"].toString(),{param:decodeURIComponent(e.headers["x-yfcx123app-params"].replace(/\+/g," "))}),{variant:"danger"}),this.removeId=null,this.loadAll(),this.closeDialog()}).catch(e=>{this.alertService.showHttpError(e.response)})},prepareRemove(e){this.removeId=e.login,this.$refs.removeUser&&this.$refs.removeUser.show()},closeDialog(){this.$refs.removeUser&&this.$refs.removeUser.hide()}}}),E=["textContent"],J={class:"d-flex justify-content-end"},K=["disabled"],N=["textContent"],z=["onClick"],F=["textContent"],H={key:0,class:"table-responsive"},T={class:"table table-striped","aria-describedby":"Users"},Y=["textContent"],G=["textContent"],Q=["textContent"],W=["textContent"],X={scope:"col"},Z=["textContent"],x=["textContent"],ee=["textContent"],te=["textContent"],ne={key:0},oe=["id"],se={class:"jhi-user-email"},re=["onClick","textContent"],ie=["onClick","disabled","textContent"],ae={class:"badge badge-info"},le={class:"text-right"},de={class:"btn-group"},ue=["onClick"],me=["textContent"],ce=["onClick"],pe=["textContent"],he=["textContent"],ge={class:"modal-body"},ve=["textContent"],fe=["textContent"],Ce=["textContent"],be={class:"row justify-content-center"},$e={class:"row justify-content-center"};function ye(e,o,y,k,M,O){const m=c("font-awesome-icon"),h=c("router-link"),l=c("jhi-sort-indicator"),v=c("b-button"),f=c("b-modal"),C=c("jhi-item-count"),b=c("b-pagination");return u(),d("div",null,[t("h2",null,[t("span",{id:"user-management-page-heading",textContent:s(e.t$("userManagement.home.title")),"data-cy":"userManagementPageHeading"},null,8,E),t("div",J,[t("button",{class:"btn btn-info mr-2",onClick:o[0]||(o[0]=(...n)=>e.handleSyncList&&e.handleSyncList(...n)),disabled:e.isLoading},[r(m,{icon:"sync",spin:e.isLoading},null,8,["spin"]),t("span",{textContent:s(e.t$("userManagement.home.refreshListLabel"))},null,8,N)],8,K),r(h,{custom:"",to:{name:"JhiUserCreate"}},{default:p(({navigate:n})=>[t("button",{onClick:n,class:"btn btn-primary jh-create-entity"},[r(m,{icon:"plus"}),o[12]||(o[12]=P()),t("span",{textContent:s(e.t$("userManagement.home.createLabel"))},null,8,F)],8,z)]),_:1})])]),e.users?(u(),d("div",H,[t("table",T,[t("thead",null,[t("tr",null,[t("th",{scope:"col",onClick:o[1]||(o[1]=n=>e.changeOrder("id"))},[t("span",{textContent:s(e.t$("global.field.id"))},null,8,Y),r(l,{"current-order":e.propOrder,reverse:e.reverse,"field-name":"id"},null,8,["current-order","reverse"])]),t("th",{scope:"col",onClick:o[2]||(o[2]=n=>e.changeOrder("login"))},[t("span",{textContent:s(e.t$("userManagement.login"))},null,8,G),r(l,{"current-order":e.propOrder,reverse:e.reverse,"field-name":"login"},null,8,["current-order","reverse"])]),t("th",{scope:"col",onClick:o[3]||(o[3]=n=>e.changeOrder("email"))},[t("span",{textContent:s(e.t$("userManagement.email"))},null,8,Q),r(l,{"current-order":e.propOrder,reverse:e.reverse,"field-name":"email"},null,8,["current-order","reverse"])]),o[13]||(o[13]=t("th",{scope:"col"},null,-1)),t("th",{scope:"col",onClick:o[4]||(o[4]=n=>e.changeOrder("langKey"))},[t("span",{textContent:s(e.t$("userManagement.langKey"))},null,8,W),r(l,{"current-order":e.propOrder,reverse:e.reverse,"field-name":"langKey"},null,8,["current-order","reverse"])]),t("th",X,[t("span",{textContent:s(e.t$("userManagement.profiles"))},null,8,Z)]),t("th",{scope:"col",onClick:o[5]||(o[5]=n=>e.changeOrder("createdDate"))},[t("span",{textContent:s(e.t$("userManagement.createdDate"))},null,8,x),r(l,{"current-order":e.propOrder,reverse:e.reverse,"field-name":"createdDate"},null,8,["current-order","reverse"])]),t("th",{scope:"col",onClick:o[6]||(o[6]=n=>e.changeOrder("lastModifiedBy"))},[t("span",{textContent:s(e.t$("userManagement.lastModifiedBy"))},null,8,ee),r(l,{"current-order":e.propOrder,reverse:e.reverse,"field-name":"lastModifiedBy"},null,8,["current-order","reverse"])]),t("th",{scope:"col",id:"modified-date-sort",onClick:o[7]||(o[7]=n=>e.changeOrder("lastModifiedDate"))},[t("span",{textContent:s(e.t$("userManagement.lastModifiedDate"))},null,8,te),r(l,{"current-order":e.propOrder,reverse:e.reverse,"field-name":"lastModifiedDate"},null,8,["current-order","reverse"])]),o[14]||(o[14]=t("th",{scope:"col"},null,-1))])]),e.users?(u(),d("tbody",ne,[(u(!0),d(U,null,D(e.users,n=>(u(),d("tr",{key:n.id,id:n.login},[t("td",null,[r(h,{to:{name:"JhiUserView",params:{userId:n.login}}},{default:p(()=>[P(s(n.id),1)]),_:2},1032,["to"])]),t("td",null,s(n.login),1),t("td",se,s(n.email),1),t("td",null,[n.activated?g("",!0):(u(),d("button",{key:0,class:"btn btn-danger btn-sm deactivated",onClick:a=>e.setActive(n,!0),textContent:s(e.t$("userManagement.deactivated"))},null,8,re)),n.activated?(u(),d("button",{key:1,class:"btn btn-success btn-sm",onClick:a=>e.setActive(n,!1),disabled:e.username===n.login,textContent:s(e.t$("userManagement.activated"))},null,8,ie)):g("",!0)]),t("td",null,s(n.langKey),1),t("td",null,[(u(!0),d(U,null,D(n.authorities,a=>(u(),d("div",{key:a},[t("span",ae,s(a),1)]))),128))]),t("td",null,s(e.formatDate(n.createdDate)),1),t("td",null,s(n.lastModifiedBy),1),t("td",null,s(e.formatDate(n.lastModifiedDate)),1),t("td",le,[t("div",de,[r(h,{to:{name:"JhiUserView",params:{userId:n.login}},custom:""},{default:p(({navigate:a})=>[t("button",{onClick:a,class:"btn btn-info btn-sm details"},[r(m,{icon:"eye"}),t("span",{class:"d-none d-md-inline",textContent:s(e.t$("entity.action.view"))},null,8,me)],8,ue)]),_:2},1032,["to"]),r(h,{to:{name:"JhiUserEdit",params:{userId:n.login}},custom:""},{default:p(({navigate:a})=>[t("button",{onClick:a,class:"btn btn-primary btn-sm edit"},[r(m,{icon:"pencil-alt"}),t("span",{class:"d-none d-md-inline",textContent:s(e.t$("entity.action.edit"))},null,8,pe)],8,ce)]),_:2},1032,["to"]),r(v,{onClick:a=>e.prepareRemove(n),variant:"danger",class:"btn btn-sm delete",disabled:e.username===n.login},{default:p(()=>[r(m,{icon:"times"}),t("span",{class:"d-none d-md-inline",textContent:s(e.t$("entity.action.delete"))},null,8,he)]),_:2},1032,["onClick","disabled"])])])],8,oe))),128))])):g("",!0)]),r(f,{ref:"removeUser",id:"removeUser",title:e.t$("entity.delete.title"),onOk:o[10]||(o[10]=n=>e.deleteUser())},{"modal-footer":p(()=>[t("div",null,[t("button",{type:"button",class:"btn btn-secondary",textContent:s(e.t$("entity.action.cancel")),onClick:o[8]||(o[8]=n=>e.closeDialog())},null,8,fe),t("button",{type:"button",class:"btn btn-primary",id:"confirm-delete-user",textContent:s(e.t$("entity.action.delete")),onClick:o[9]||(o[9]=n=>e.deleteUser())},null,8,Ce)])]),default:p(()=>[t("div",ge,[t("p",{id:"jhi-delete-user-heading",textContent:s(e.t$("userManagement.delete.question",{login:e.removeId}))},null,8,ve)])]),_:1},8,["title"])])):g("",!0),_(t("div",null,[t("div",be,[r(C,{page:e.page,total:e.queryCount,itemsPerPage:e.itemsPerPage},null,8,["page","total","itemsPerPage"])]),t("div",$e,[r(b,{size:"md","total-rows":e.totalItems,modelValue:e.page,"onUpdate:modelValue":o[11]||(o[11]=n=>e.page=n),"per-page":e.itemsPerPage,change:e.loadPage(e.page)},null,8,["total-rows","modelValue","per-page","change"])])],512),[[A,e.users&&e.users.length>0]])])}const De=j(q,[["render",ye]]);export{De as default};
