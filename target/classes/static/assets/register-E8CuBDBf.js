import{d as j,R as z,r as i,u as F,a as T,l as K,o as Q,E as p,b as R,c as q,_ as G,e as r,f as H,g as J,h as t,w as s,i as a,j as m,v as b,k as U,t as W}from"./app-sWctXk48.js";import{b as X}from"./element-china-area-data-BVDNhPol.js";const Y=j({compatConfig:{MODE:3},name:"Register",components:{ribbon:z},setup(){const e=i(""),o=i(""),M=i(""),V=i(""),$=i(""),k=i(""),L=i(""),g=i(""),c=i(""),n=i(!1),y=i([]),f=i(0),w=i(!1),d=i(null),A=F();T();const E=()=>{A.push("/")},N=K(()=>{const u=y.value.length>0?y.value.join(" "):"";return u?`${u} ${k.value}`:k.value}),l=()=>{w.value=/^1[3-9]\d{9}$/.test(g.value)},B=async()=>{var u,C,P;try{if(!w.value){p.warning("请输入有效的11位手机号码");return}const{data:v}=await R.post("/api/sms-code",{mobile:g.value,templateCode:"SMS_285020683"},{timeout:3e3,headers:{"Content-Type":"application/json;charset=UTF-8"}});switch(v.code){case 200:h(),p.success({message:"验证码已发送至您的手机，5分钟内有效",duration:5e3,showClose:!0});break;case 429:p.warning("操作过于频繁，请60秒后再试"),h(60);break;case 500:p.error(`服务异常：${v.message||"请联系管理员"}`);break;default:q.alert(v.message||"短信服务暂不可用")}}catch(v){console.error("短信服务调用失败:",v);const I=new Map([["ECONNABORTED","请求超时，请检查网络连接"],["Network Error","网络连接不可用"],["ERR_BAD_REQUEST","无效的请求参数"],["403","AccessKey验证失败"]]),S=(u=v.response)==null?void 0:u.status,O=v.code||S,D=I.get(O)||((P=(C=v.response)==null?void 0:C.data)==null?void 0:P.message)||"服务暂时不可用，请稍后重试";p.error({message:`发送失败：${D}`,duration:3e3,showClose:!0})}},h=(u=60)=>{f.value=u,d.value&&clearInterval(d.value),d.value=setInterval(()=>{if(f.value<=0){clearInterval(d.value),d.value=null;return}f.value--},1e3)};return Q(()=>{d.value&&clearInterval(d.value)}),{companyName:e,socialCreditCode:o,entityLegalPerson:M,loginPassword:V,verifyPassword:$,detailedAddress:k,companyContact:L,mobileNumber:g,smsCode:c,isAgreed:n,pcaTextArr:X,selectedOptions:y,countdown:f,isValidMobile:w,timer:d,fullyAddress:N,goToLogin:E,validateMobile:l,sendCode:B,onSubmit:async()=>{var u,C;try{if(!n.value){p.warning("请同意用户协议");return}if(V.value!==$.value){p.error("两次输入的密码不一致");return}await R.post("/api/register",{companyName:e.value,socialCreditCode:o.value,entityLegalPerson:M.value,password:V.value,fullyAddress:N.value,companyContact:L.value,mobileNumber:g.value,smsCode:c.value}),p.success("注册成功，请登录"),A.push("/")}catch(P){p.error(`注册失败: ${((C=(u=P.response)==null?void 0:u.data)==null?void 0:C.message)||P.message}`)}},t$:T().t}}}),Z={class:"common-layout"};function _(e,o,M,V,$,k){const L=r("el-image"),g=r("el-header"),c=r("el-divider"),n=r("el-form-item"),y=r("el-cascader"),f=r("el-button"),w=r("el-checkbox"),d=r("el-form"),A=r("el-main"),E=r("el-footer"),N=r("el-container");return H(),J("div",Z,[t(N,null,{default:s(()=>[t(g,null,{default:s(()=>[t(L,{style:{width:"100%",height:"100%"},src:"/content/images/register_header.jpg",fit:e.fit},null,8,["fit"])]),_:1}),t(A,null,{default:s(()=>[t(d,{"label-position":e.labelPosition,"label-width":"auto",model:e.formLabelAlign},{default:s(()=>[o[15]||(o[15]=a("span",{class:"common-title"},"账户信息",-1)),t(c,{class:"thick-divider"}),t(n,{label:"单位名称","label-position":e.itemLabelPosition},{default:s(()=>[m(a("input",{"onUpdate:modelValue":o[0]||(o[0]=l=>e.companyName=l),placeholder:"请输入单位名称",style:{width:"550px"}},null,512),[[b,e.companyName]])]),_:1},8,["label-position"]),t(n,{label:"社会信用代码","label-position":e.itemLabelPosition},{default:s(()=>[m(a("input",{"onUpdate:modelValue":o[1]||(o[1]=l=>e.socialCreditCode=l),placeholder:"请输入社会信用代码",style:{width:"550px"}},null,512),[[b,e.socialCreditCode]])]),_:1},8,["label-position"]),t(n,{label:"企业法人","label-position":e.itemLabelPosition},{default:s(()=>[m(a("input",{"onUpdate:modelValue":o[2]||(o[2]=l=>e.entityLegalPerson=l),placeholder:"请输入企业法人",style:{width:"550px"}},null,512),[[b,e.entityLegalPerson]])]),_:1},8,["label-position"]),t(n,{label:"登录密码","label-position":e.itemLabelPosition},{default:s(()=>[m(a("input",{"onUpdate:modelValue":o[3]||(o[3]=l=>e.loginPassword=l),type:"password",placeholder:"请输入登录密码",style:{width:"550px"}},null,512),[[b,e.loginPassword]])]),_:1},8,["label-position"]),t(n,{label:"确认密码","label-position":e.itemLabelPosition},{default:s(()=>[m(a("input",{"onUpdate:modelValue":o[4]||(o[4]=l=>e.verifyPassword=l),type:"password",placeholder:"请输入确认密码",style:{width:"550px"}},null,512),[[b,e.verifyPassword]])]),_:1},8,["label-position"]),t(n,{label:"行政区划","label-position":e.itemLabelPosition},{default:s(()=>[t(y,{placeholder:"请选择省市区",size:"large",options:e.pcaTextArr,modelValue:e.selectedOptions,"onUpdate:modelValue":o[5]||(o[5]=l=>e.selectedOptions=l),style:{width:"550px"}},null,8,["options","modelValue"])]),_:1},8,["label-position"]),t(n,{label:"公司地址","label-position":e.itemLabelPosition},{default:s(()=>[m(a("input",{"onUpdate:modelValue":o[6]||(o[6]=l=>e.detailedAddress=l),placeholder:"请输入详细地址",style:{width:"550px"}},null,512),[[b,e.detailedAddress]])]),_:1},8,["label-position"]),o[16]||(o[16]=a("span",{class:"common-title"},"联系方式",-1)),t(c,{class:"thick-divider"}),t(n,{label:"企业联系人","label-position":e.itemLabelPosition},{default:s(()=>[m(a("input",{"onUpdate:modelValue":o[7]||(o[7]=l=>e.companyContact=l),placeholder:"请输入企业联系人",style:{width:"550px"}},null,512),[[b,e.companyContact]])]),_:1},8,["label-position"]),t(n,{label:"手机号码","label-position":e.itemLabelPosition},{default:s(()=>[m(a("input",{"onUpdate:modelValue":o[8]||(o[8]=l=>e.mobileNumber=l),onInput:o[9]||(o[9]=(...l)=>e.validateMobile&&e.validateMobile(...l)),placeholder:"请输入手机号码",style:{width:"550px"}},null,544),[[b,e.mobileNumber]])]),_:1},8,["label-position"]),t(n,{label:"短信验证码","label-position":e.itemLabelPosition},{default:s(()=>[m(a("input",{"onUpdate:modelValue":o[10]||(o[10]=l=>e.smsCode=l),placeholder:"请输入短信验证码",style:{width:"450px"}},null,512),[[b,e.smsCode]]),t(f,{type:"primary",disabled:!e.isValidMobile||e.isCounting,onClick:e.sendCode},{default:s(()=>[U(W(e.countdown>0?`${e.countdown}秒后重试`:"获取验证码"),1)]),_:1},8,["disabled","onClick"])]),_:1},8,["label-position"]),t(n,null,{default:s(()=>[t(w,{modelValue:e.isAgreed,"onUpdate:modelValue":o[11]||(o[11]=l=>e.isAgreed=l)},{default:s(()=>o[12]||(o[12]=[U(" 已阅读并同意遵守《用户服务协议》 和 《隐私政策》 ")])),_:1},8,["modelValue"])]),_:1}),t(n,null,{default:s(()=>[t(f,{type:"primary",onClick:e.onSubmit},{default:s(()=>o[13]||(o[13]=[U("注册信息")])),_:1},8,["onClick"]),t(f,{onClick:e.goToLogin},{default:s(()=>o[14]||(o[14]=[U("返回登录")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["label-position","model"])]),_:1}),t(E,null,{default:s(()=>o[17]||(o[17]=[a("div",{id:"footer",class:"footer"},[a("p"),a("p"),a("p",null,"版权所有©2024-2025 深圳远方创新数据咨询有限公司"),a("p",null," 全国营销与客服热线：0755-27960108          技术支持：深圳远方创新数据咨询有限公司问题反馈或意见 ")],-1)])),_:1})]),_:1})])}const le=G(Y,[["render",_],["__scopeId","data-v-e2a1b2a3"]]);export{le as default};
